[
  {
    "path": "posts/2022-08-01-exploring-us-inflation-with-r/",
    "title": "Exploring US Inflation With R",
    "description": "US Inflation, as measured by Bureau of Labor Statistics (BLS)",
    "author": [
      {
        "name": "Arham Choudhury",
        "url": "https://arhamchoudhury.com/"
      }
    ],
    "date": "2022-08-01",
    "categories": [],
    "contents": "\r\nThis is inspired by a Jonathan Regenstein twitter post from\r\nDec 6th, 2021.\r\nI want to update the analysis with latest data + make some\r\nmodifications to his original charts.\r\n- Jonathan’s twitter post: https://twitter.com/jkregenstein/status/1467962068863275011?s=20\r\n- Jonathan’s original github code: https://gist.github.com/jkr216/0c6463e99dc54f323ed4976392ce3c57\r\nSection 0:Load libraries and my custom function\r\n\r\n\r\nShow code\r\n\r\nlibrary(tidyverse)\r\nsuppressPackageStartupMessages(library(tidyquant))\r\nlibrary(timetk)\r\nlibrary(scales)\r\nlibrary(plotly)\r\nlibrary(ggrepel)\r\n\r\n# Change vs 12 months ago\r\nYY <- function(x){\r\n  (x - lag(x,12))/lag(x,12)\r\n}\r\n\r\n\r\nSection 1: get & prepare data\r\nLet’s use the {tidyquant} package to access the BLS data in a tidy\r\nformat. For starters, lets make sure that the data from {tidyquant} is\r\nthe same as the official BLS press release.\r\nThe latest BLS press releases: https://www.bls.gov/news.release/cpi.nr0.htm\r\nMost commonly quoted figure from that press release appears to the 8.5%\r\nyear-over-year increase in “All Items”\r\n\r\n\r\nShow code\r\n\r\n# Section 1.1: CPI Consumer Price Index for All Urban Consumers: All Items in U.S. City Average\r\nCPIAUCSL_YY12M_SA <- tq_get(\"CPIAUCSL\", get= \"economic.data\", from = \"2018-01-01\")  %>%\r\n  summarise_by_time(\r\n    .date_var = date,\r\n    .by = \"month\",\r\n    CPI_allitems_monthly = mean(price, na.rm = T)) %>%\r\n  mutate(CPI_YY_12M_SA = YY(CPI_allitems_monthly)*100) %>%\r\n  rename(`Reported Inflation` = CPI_YY_12M_SA) %>%\r\n  na.omit()\r\ntail(CPIAUCSL_YY12M_SA, 3)\r\n\r\n# A tibble: 3 × 3\r\n  date       CPI_allitems_monthly `Reported Inflation`\r\n  <date>                    <dbl>                <dbl>\r\n1 2022-04-01                 289.                 8.22\r\n2 2022-05-01                 291.                 8.52\r\n3 2022-06-01                 295.                 9.00\r\n\r\nHmm, Looks like there is a very small difference\r\nbetween these numbers and the Mar’22 release from BLS. The script above\r\nreturns 8.56% (rounding to 8.6%), whereas the BLS reported 8.5%\r\nA closer read of their press release reveals that they are using the\r\nnot seasonally adjusted figures for their 12 Month\r\nChange calculations. Let’s modify the above code - replace the FRED ID\r\nfrom “CPIAUCSL” to “CPIAUCNS”\r\n\r\n\r\nShow code\r\n\r\n# Section 1.2: CPI Consumer Price Index for All Urban Consumers: All Items in U.S. City Average\r\n# Not Seasonally Adjusted\r\nCPIAUCSL_YY12M_NSA <- tq_get(\"CPIAUCNS\", get= \"economic.data\", from = \"2018-01-01\")  %>%\r\n  summarise_by_time(\r\n    .date_var = date,\r\n    .by = \"month\",\r\n    CPI_allitems_monthly = mean(price, na.rm = T)) %>%\r\n  mutate(CPI_YY_12M_NSA = YY(CPI_allitems_monthly)*100) %>%\r\n  rename(`Reported Inflation` = CPI_YY_12M_NSA) %>%\r\n  na.omit()\r\ntail(CPIAUCSL_YY12M_NSA, 3)\r\n\r\n# A tibble: 3 × 3\r\n  date       CPI_allitems_monthly `Reported Inflation`\r\n  <date>                    <dbl>                <dbl>\r\n1 2022-04-01                 289.                 8.26\r\n2 2022-05-01                 292.                 8.58\r\n3 2022-06-01                 296.                 9.06\r\n\r\nThe latest data point (8.5% for March 2022) in my data frame, matches\r\nthe BLS press release. Now, on to the rest of the exploration.\r\nSection 2.1: Visualize Reported Inflation\r\nFirst chart, a look at inflation from Jan 2019 to March 2022.\r\n\r\n\r\nShow code\r\n\r\nCPIAUCSL_chart <- CPIAUCSL_YY12M_NSA %>%\r\n  ggplot(aes(x=date, y=`Reported Inflation`)) +\r\n  geom_line() +\r\n  geom_point() +\r\n  geom_hline(yintercept = 0) +\r\n  scale_y_continuous(labels = scales::number_format(accuracy = 0.1),\r\n                     breaks = pretty_breaks(10)) +\r\n  scale_x_date(date_breaks = \"1 month\",\r\n               date_labels = \"%m-%y\") +\r\n  labs(title = \"Reported Inflation\",\r\n       y     = \"Inflation (%)\", x = \"Month\") +\r\n  theme(axis.text.x=element_text(angle=45, hjust=1, size = 4))\r\n\r\n\r\nInteractive chart via {plotly}\r\n\r\n\r\nShow code\r\n\r\nCPIAUCSL_plotly <- ggplotly(CPIAUCSL_chart) %>%\r\n  layout(title = list(text = paste0('Reported Inflation',\r\n                                    '<br>',\r\n                                    '<sup>',\r\n                                    'Source: BLS, Viz by @TidySigma',\r\n                                    '<\/sup>'))) %>%\r\n  config(displayModeBar = FALSE)\r\nCPIAUCSL_plotly\r\n\r\n\r\n\r\nNotable trends\r\n* Inflation breaks past 3% around April 2021\r\n* Briefly plateau around 5.5% between June-September 2021\r\n* Sharp upward trajectory from Oct 2021 to present\r\n* Latest print of 8.5% is a 40 year high\r\nAll of these recent trends are causing alarm among inflation\r\nwatchers.\r\nSection 2.2: Visualize Expected Future Inflation\r\nMany inflation observers are keeping a close eye on not just today’s\r\ninflation, but expected future inflation. A good measure is the “5-Year\r\nBreakeven Inflation Rate”. Definition from the Federal Reserve: “The\r\nbreakeven inflation rate represents a measure of expected inflation\r\nderived from 5-Year Treasury Constant Maturity Securities (BC_5YEAR) and\r\n5-Year Treasury Inflation-Indexed Constant Maturity Securities\r\n(TC_5YEAR). The latest value implies what market participants expect\r\ninflation to be in the next 5 years, on average.” Lets use the FRED ID\r\n“T5YIE” to access this from {tidyquant}.\r\n\r\n\r\nShow code\r\n\r\nT5YIE_monthly <- tq_get(\"T5YIE\", get= \"economic.data\", from = \"2018-01-01\") %>%\r\n  mutate(Percent = price/100) %>%\r\n  summarise_by_time(\r\n    .date_var = date,\r\n    .by = \"month\",\r\n    expected_five_year = mean(Percent, na.rm = T)*100) %>%\r\n  rename(`Expected Inflation` = expected_five_year)\r\n\r\nT5YIE_chart <- T5YIE_monthly %>%\r\n  ggplot(aes(x=date, y=`Expected Inflation`)) +\r\n  geom_line() +\r\n  geom_point() +\r\n  geom_hline(yintercept = 0) +\r\n  scale_y_continuous(labels = scales::number_format(accuracy = 0.1),\r\n                     breaks = pretty_breaks(10)) +\r\n  scale_x_date(date_breaks = \"1 month\",\r\n               date_labels = \"%m-%y\") +\r\n    labs(title = \"Expected Inflation\",\r\n       y     = \"Inflation (%)\", x = \"Month\") +\r\n  theme(axis.text.x=element_text(angle=90, hjust=1, size = 4))\r\n\r\nT5YIE_plotly <- ggplotly(T5YIE_chart) %>% \r\n  layout(title = list(text = paste0('Expected Inflation',\r\n                                    '<br>',\r\n                                    '<sup>',\r\n                                    'Source: Fed Reserve, Viz by @TidySigma',\r\n                                    '<\/sup>'))) %>%\r\n  config(displayModeBar = FALSE)\r\nT5YIE_plotly\r\n\r\n\r\n\r\nSimilar to reported inflation, today’s expectation for\r\ninflation 5 years from now is on a similar upward\r\ntrajectory.\r\nTo read the above chart:\r\n* As of March 2022, the market expected March 2027\r\ninflation to be around 3.4%\r\n* Good news: market expects inflation to come down from today 8.5% down\r\nto about 3.4% 5 years from now\r\n* Bad news: inflation is expected to be elevated (i.e. beyond the\r\n“normal” ~2% level)\r\nSection 2.3: combine reported inflation data with expected\r\ninflation\r\nLooking at these two trends side-by-side gives us an interesting view\r\nof what is going on.\r\nIn addition to plotting these two trends, I like Jonathan’s idea of\r\nsubtracting expected minus actual to get to an “Unexpected Inflation”\r\nfigure.\r\n\r\n\r\nShow code\r\n\r\ndf <- left_join(T5YIE_monthly, CPIAUCSL_YY12M_NSA, by=\"date\") %>%\r\n  select(date, `Expected Inflation`, `Reported Inflation`) %>%\r\n  mutate(`Unexpected Inflation` =  `Reported Inflation` - `Expected Inflation`) %>%\r\n  filter(date > \"2019-03-01\") %>%\r\n  mutate(across(`Expected Inflation`:`Unexpected Inflation`, ~round(.x,3)))\r\n\r\nchart_plotly <- df %>%\r\n  plot_ly(x=~date, y=~`Reported Inflation`, type='scatter', mode='lines+markers', name = \"Reported\") %>%\r\n  add_trace(x=~date, y=~`Expected Inflation`, type='scatter', mode='lines+markers', name = \"Expected\") %>%\r\n  add_trace(x=~date, y=~`Unexpected Inflation`, type = 'bar', name = \"Unexpected\",\r\n            opacity=0.25) %>%\r\n  layout(title = list(text = paste0('Inflation: Reported, Expected & Unexpected',\r\n                                    '<br>',\r\n                                    '<sup>',\r\n                                    'Sources: BLS, Federal Reserve, Viz by @TidySigma',\r\n                                    '<\/sup>') ), \r\n         plot_bgcolor = \"#e5ecf6\",\r\n         yaxis = list(title = 'Inflation Percent (%)', ticksuffix = \"%\"),\r\n         xaxis = list(title = 'Month', type = 'date',\r\n                      tickformat = \"%m-%y\", tickangle=-90, tickfont = list(size = 4),\r\n                      range = list(\"2019-03-01\", \"2022-06-01\"),\r\n                      showgrid = T, dtick=\"M1\")) %>%\r\n  config(displayModeBar = FALSE)\r\nchart_plotly\r\n\r\n\r\n\r\nSummary of findings\r\n* As of a few months ago, a lot of market watchers were not sure sure if\r\ninflation was going to continue to go up, or if things were going to be\r\ntransitory.\r\n* Clearly inflation has picked up in recent months, and this is cause\r\nfor concern.\r\n* The gap between reported inflation and 5 year expectation of inflation\r\n(the green bars) remains large, so market participants expect inflation\r\nto eventually come down.\r\n* It is important to keep an eye on expected inflation, hopefully this\r\nwill go down to a less alarming level soon.\r\nFor any questions, comments, bug notifications, etc; please contact\r\nme via Twitter @TidySigma\r\nEnd\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2022-08-01T17:43:17-05:00",
    "input_file": "exploring-us-inflation-with-r.knit.md"
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to Arham's Blog",
    "description": "Welcome! This is my data science blog.   \nTopics: R, Python & SQL",
    "author": [
      {
        "name": "Arham Choudhury",
        "url": "https://arhamchoudhury.com/"
      }
    ],
    "date": "2022-08-01",
    "categories": [],
    "contents": "\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2022-08-01T17:04:19-05:00",
    "input_file": {}
  }
]
